<!-- templates/components/buy_signals_table.html -->
<div class="overflow-x-auto">
    <table class="w-full table-auto">
        <thead>
            <tr class="bg-gray-50">
                <th class="px-4 py-2 text-left">Rank</th>
                <th class="px-4 py-2 text-left">Ticker</th>
                <th class="px-4 py-2 text-left">Nome</th>
                <th class="px-4 py-2 text-right">Score</th>
                <th class="px-4 py-2 text-right">Margem</th>
                <th class="px-4 py-2 text-center">Sinal</th>
                <th class="px-4 py-2 text-right">Mercado</th>
            </tr>
        </thead>
        <tbody>
            {% for signal in signals %}
            <tr class="border-b hover:bg-gray-50">
                <td class="px-4 py-2 font-medium">{{ loop.index + ((current_page-1)*20) }}</td>
                <td class="px-4 py-2 font-bold text-lg">{{ signal.ticker }}</td>
                <td class="px-4 py-2">{{ signal.nome[:40] }}{% if signal.nome|length > 40 %}...{% endif %}</td>
                <td class="px-4 py-2 text-right font-bold text-{{ 'green-600' if signal.score >= 70 else 'yellow-600' if signal.score >= 40 else 'red-600' }}">{{ signal.score }}/100</td>
                <td class="px-4 py-2 text-right {{ 'text-green-600' if signal.margem > 0 else 'text-red-600' }}">{{ "%.1f"|format(signal.margem) }}%</td>
                <td class="px-4 py-2 text-center">
                    <span class="badge {{ 'badge-success' if signal.score >= 70 else 'badge-warning' if signal.score >= 40 else 'badge-danger' }}">
                        {{ 'COMPRA' if signal.score >= 70 else 'NEUTRO' if signal.score >= 40 else 'VENDA' }}
                    </span>
                </td>
                <td class="px-4 py-2">
                    <span class="badge badge-neutral">{{ signal.mercado }}</span>
                </td>
            </tr>
            {% endfor %}
        </tbody>
    </table>
</div>

<!-- Paginação HTMX -->
<div class="flex justify-center mt-6 space-x-2">
    {% if current_page > 1 %}
    <a href="?page={{ current_page-1 }}&{{ request.args.to_dict()|urlencode }}" 
       class="btn btn-secondary px-4 py-2" hx-get="/dashboard/buy-signals/table" hx-target="#signals-table">
        « Anterior
    </a>
    {% endif %}
    
    <span class="px-4 py-2 bg-gray-200 rounded">{{ current_page }} / {{ total_pages }}</span>
    
    {% if current_page < total_pages %}
    <a href="?page={{ current_page+1 }}&{{ request.args.to_dict()|urlencode }}" 
       class="btn btn-secondary px-4 py-2" hx-get="/dashboard/buy-signals/table" hx-target="#signals-table">
        Próxima »
    </a>
    {% endif %}
</div>
