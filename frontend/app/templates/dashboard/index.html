<!DOCTYPE html>
{% extends "base.html" %}
{% block title %}Dashboard Exitus{% endblock %}

{% block content %}
<div class="container mx-auto p-6 space-y-6">
  <!-- Header Dashboard -->
  <div class="flex flex-col lg:flex-row lg:items-center lg:justify-between gap-4 mb-8">
    <div>
      <h1 class="text-3xl lg:text-4xl font-bold text-gray-900">
        <i class="fas fa-chart-line text-blue-600 mr-3"></i>
        Dashboard Exitus
      </h1>
      <p class="text-gray-600 mt-2">Visão geral consolidada dos seus investimentos</p>
    </div>
    <div class="flex flex-wrap gap-3">
      <a href="/dashboard/buy-signals" class="btn btn-primary px-6 py-2">
        <i class="fas fa-bolt mr-2"></i> Buy Signals
      </a>
      <a href="/dashboard/portfolios" class="btn btn-secondary px-6 py-2">
        <i class="fas fa-wallet mr-2"></i> Carteiras
      </a>
    </div>
  </div>

  <!-- Quick Stats Cards (INTEGRADOS) -->
  <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6 mb-8">
    
    <!-- Card 1: Patrimônio Total -->
    <div class="card p-6 text-center hover:shadow-xl transition-shadow bg-white border-t-4 border-blue-500">
      <div class="text-3xl font-bold text-gray-800 mb-2">
        R$ {{ "%.2f"|format(dados.patrimonio_total) }}
      </div>
      <div class="text-xs text-gray-500 uppercase font-bold tracking-wider">Patrimônio Total</div>
    </div>

    <!-- Card 2: Rentabilidade Geral -->
    <div class="card p-6 text-center hover:shadow-xl transition-shadow bg-white border-t-4 
        {% if dados.rentabilidade_geral >= 0 %}border-green-500{% else %}border-red-500{% endif %}">
      <div class="text-3xl font-bold mb-2 
          {% if dados.rentabilidade_geral >= 0 %}text-green-600{% else %}text-red-600{% endif %}">
        {{ "%+.2f"|format(dados.rentabilidade_geral) }}%
      </div>
      <div class="text-xs text-gray-500 uppercase font-bold tracking-wider">Rentabilidade Geral</div>
    </div>

    <!-- Card 3: Portfólios Ativos -->
    <div class="card p-6 text-center hover:shadow-xl transition-shadow bg-white border-t-4 border-purple-500">
      <div class="text-3xl font-bold text-purple-600 mb-2">
        {{ dados.total_portfolios }}
      </div>
      <div class="text-xs text-gray-500 uppercase font-bold tracking-wider">Carteiras Ativas</div>
    </div>

    <!-- Card 4: Ativos na Carteira -->
    <div class="card p-6 text-center hover:shadow-xl transition-shadow bg-white border-t-4 border-yellow-500">
      <div class="text-3xl font-bold text-yellow-600 mb-2">
        {{ dados.total_ativos }}
      </div>
      <div class="text-xs text-gray-500 uppercase font-bold tracking-wider">Posições em Aberto</div>
    </div>
  </div>

  <!-- Gráficos de Portfólio (Stub Visual - Futuro: Integrar com Chart.js via dados JSON) -->
  <div class="grid grid-cols-1 lg:grid-cols-2 gap-6 mb-8">
    <div class="card bg-white p-6">
      <h2 class="text-lg font-bold text-gray-700 mb-4">Evolução Patrimonial (Simulado)</h2>
      <div class="h-64 bg-gray-50 rounded flex items-center justify-center text-gray-400">
        <i class="fas fa-chart-area text-4xl opacity-20"></i>
        <span class="ml-2 text-sm">Gráfico aguardando histórico de dados</span>
      </div>
    </div>
    <div class="card bg-white p-6">
      <h2 class="text-lg font-bold text-gray-700 mb-4">Alocação por Ativo (Simulado)</h2>
      <div class="h-64 bg-gray-50 rounded flex items-center justify-center text-gray-400">
        <i class="fas fa-chart-pie text-4xl opacity-20"></i>
        <span class="ml-2 text-sm">Gráfico aguardando posições consolidadas</span>
      </div>
    </div>
  </div>

  <!-- Quick Actions -->
  <div class="grid grid-cols-1 md:grid-cols-3 gap-6">
    <div class="card p-6 hover:bg-gray-50 transition">
      <h3 class="font-bold text-lg mb-4 flex items-center text-gray-800">
        <i class="fas fa-plus-circle text-green-500 mr-2"></i>Nova Transação
      </h3>
      <a href="/dashboard/transactions" class="btn btn-success w-full text-white">+ Compra/Venda</a>
    </div>
    <div class="card p-6 hover:bg-gray-50 transition">
      <h3 class="font-bold text-lg mb-4 flex items-center text-gray-800">
        <i class="fas fa-wallet text-blue-500 mr-2"></i>Carteiras
      </h3>
      <a href="/dashboard/portfolios" class="btn btn-primary w-full text-white">Gerenciar Carteiras</a>
    </div>
    <div class="card p-6 hover:bg-gray-50 transition">
      <h3 class="font-bold text-lg mb-4 flex items-center text-gray-800">
        <i class="fas fa-bell text-yellow-500 mr-2"></i>Alertas
      </h3>
      <a href="/dashboard/alerts" class="btn btn-warning w-full text-white">Configurar Alertas</a>
    </div>
  </div>
</div>
{% endblock %}
